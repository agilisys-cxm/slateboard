{"version":3,"sources":["../../src/pages/venue/venue.module.ts","../../src/pages/venue/venue.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { VenuePage } from './venue';\n\n@NgModule({\n  declarations: [\n    VenuePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(VenuePage),\n  ],\n})\nexport class VenuePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/venue/venue.module.ts","import { Component } from '@angular/core';\nimport {\n    IonicPage, LoadingController,\n    NavController,\n    NavParams,\n    Refresher,\n    ToastController\n} from 'ionic-angular';\n\nimport { VenueModel } from \"../../models/venue-model\";\nimport { LeaderboardModel} from \"../../models/leaderboard-model\";\nimport { DataProvider} from \"../../providers/data/data\";\nimport { VenueProvider} from \"../../providers/venue/venue\";\nimport { MembershipProvider} from \"../../providers/membership/membership\";\n\n\n/**\n * Generated class for the VenuePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-venue',\n  templateUrl: 'venue.html',\n})\nexport class VenuePage {\n\n  venue: VenueModel;\n  provider: VenueProvider;\n  loaded: boolean = false;\n\n  leaderboards: LeaderboardModel[] = [];\n\n  membership: MembershipProvider;\n\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public toastCtrl: ToastController,\n              public data: DataProvider,\n              public loadingCtrl: LoadingController) {\n\n    this.venue = navParams.get('venue') || null;\n\n    if (!this.venue.nid) {\n\n        console.log('No venue!');\n        this.navCtrl.setRoot('WelcomePage', {}, {\n            animate: true,\n            direction: 'forward'\n        });\n\n    } else {\n\n        this.provider = new VenueProvider(\n            this.venue,\n            this.data);\n\n        this.membership = new MembershipProvider(\n            this.venue.nid,\n            this.data\n        );\n\n        this.leaderboards = this.provider.attach();\n\n    }\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad()');\n    if (this.venue.nid) {\n        if (this.loaded == false) {\n            this.provider.load().then(\n                success => {\n                    this.membership.load().then(\n                        success=> {\n                            this.loaded = true;\n                            console.log('loaded', this.loaded);\n                        }\n                    )\n                });\n        }\n    }\n  }\n\n    update() {\n        let loader = this.loadingCtrl.create({\n            content: \"Updating...\",\n            duration: 10000\n        });\n        loader.present();\n\n        console.log('getTimestamp');\n        this.provider.getTimestamp().then(\n            data=> {\n\n                console.log('update Leaderboards');\n                this.provider.update().then(\n                    leaderboards => {\n\n                        if (leaderboards) {\n                            this.leaderboards = this.provider.attach();\n                        }\n                        console.log('getTimestamp - players');\n                        this.membership.getTimestamp().then(\n                            data => {\n\n                                //getMembership\n                                console.log('update Membership');\n                                this.membership.update().then(\n                                    members => {\n\n                                        loader.dismissAll();\n\n                                    },\n                                    reason=>{\n                                        console.log('error',reason);\n                                        loader.dismissAll();\n                                    });\n\n                            }, reason => {\n\n                                console.log('leaderboards',reason);\n                                loader.dismissAll();\n\n\n                            }\n                        )\n\n                    })\n\n            }, reason => {\n                console.log('timestamp',reason);\n                loader.dismissAll();\n            }\n        );\n\n    }\n\n  goTo(leaderboard: LeaderboardModel) {\n      leaderboard.setMembership(this.membership.membership);\n      leaderboard.setVenue(this.venue);\n\n      this.navCtrl.push('LeaderboardPage', {\n          leaderboard: leaderboard\n      });\n  }\n\n    doRefresh(refresher: Refresher) {\n        this.update();\n        refresher.complete();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/venue/venue.ts"],"sourceRoot":""}