{"version":3,"sources":["../../src/pages/challenger/challenger.module.ts","../../src/pages/challenger/challenger.ts"],"names":[],"mappings":"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","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ChallengerPage } from './challenger';\n\n@NgModule({\n  declarations: [\n    ChallengerPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ChallengerPage),\n  ],\n})\nexport class ChallengerPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/challenger/challenger.module.ts","import { Component } from '@angular/core';\nimport {\n    AlertController, IonicPage,\n    NavController,\n    NavParams, ToastController\n} from 'ionic-angular';\nimport {PlayerModel} from \"../../models/player-model\";\nimport {PostModel} from \"../../models/post-model\";\nimport {User} from \"../../providers/user/user\";\n\n/**\n * Generated class for the ChallengerPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-challenger',\n  templateUrl: 'challenger.html',\n})\nexport class ChallengerPage {\n\n  post: PostModel;\n  players: PlayerModel[] = [];\n  challenge: string = 'open';\n\n  account: { username: string, password: string } = {\n        username: 'username',\n        password: 'password'\n    };\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public user: User,\n              public alertCtrl: AlertController,\n              public toastCtrl: ToastController) {\n\n      this.post = navParams.get('post') || null;\n      this.players = this.post.leaderboard.membership.players;\n\n      console.log('if profile loaded', this.user.profileLoaded);\n      if (this.user.profileLoaded == true) {\n\n          console.log('Use profile');\n\n          if (this.user.profile.uid) {\n\n              let playerID = this.user.profile.player;\n              let challenger = this.post.leaderboard.membership.getPlayer(playerID);\n              this.post.challenger = challenger;\n              this.challenge = 'set';\n              this.navCtrl.push('OpponentPage', {\n                  post: this.post\n              });\n          }\n\n      } else {\n\n          console.log('Load profile');\n\n          //Load user profile\n          this.user.loadProfile().then( data=> {\n\n              if (this.user.profile.uid) {\n\n                  let playerID = this.user.profile.player;\n                  let challenger = this.post.leaderboard.membership.getPlayer(playerID);\n                  this.post.challenger = challenger;\n                  this.challenge = 'set';\n\n                  this.navCtrl.push('OpponentPage', {\n                      post: this.post\n                  });\n\n              }\n\n\n          }, error =>{\n\n              console.log('Opps', error);\n\n          });\n\n      }\n\n\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ChallengerPage');\n  }\n\n  doRegister(){\n      this.navCtrl.push('ChallengerSignupPage', {\n          post: this.post\n      });\n\n  }\n\n  doLogin(player: PlayerModel){\n\n      console.log('doLogin',player);\n\n      let prompt = this.alertCtrl.create({\n          title: 'Login',\n          message: \"Enter user password\",\n          inputs: [\n              {\n                  name: 'player',\n                  placeholder: player.username\n              },\n              {\n                  name: 'password',\n                  placeholder: 'Password',\n                  type: 'password'\n              },\n          ],\n          buttons: [\n              {\n                  text: 'Cancel',\n                  handler: data => {\n\n\n                      console.log('Cancel clicked',data);\n                  }\n              },\n              {\n                  text: 'Login',\n                  handler: data => {\n                      console.log('Login clicked',data);\n\n                      this.account.username = player.username;\n                      this.account.password = data.password;\n\n                      console.log('Login details', this.account);\n\n\n                      this.user.token().subscribe( (result) => {\n\n                          console.log('doGetToken()',result);\n\n                          this.user.login(this.account).subscribe((resp) => {\n\n                              if (this.user.loggedIn) {\n                                  let playerID = this.user.profile.player;\n                                  let challenger = this.post.leaderboard.membership.getPlayer(playerID);\n                                  this.post.challenger = challenger;\n                                  this.navCtrl.push('OpponentPage', { post: this.post  });\n\n                              } else {\n\n                                  this.toast('Login failed');\n\n                              }\n                          });\n\n                      }, (err) => {\n\n                          this.toast(err);\n\n                      });\n\n\n                  }\n              }\n          ]\n      });\n      prompt.present();\n\n  }\n\n    toast(message: string) {\n        let toast = this.toastCtrl.create({\n            message: message,\n            duration: 1000,\n            position: 'bottom'\n        });\n        toast.present();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/challenger/challenger.ts"],"sourceRoot":""}