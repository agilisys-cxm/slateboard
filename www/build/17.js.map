{"version":3,"sources":["../../src/pages/confirm-game/confirm-game.module.ts","../../src/pages/confirm-game/confirm-game.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ConfirmGamePage } from './confirm-game';\n\n@NgModule({\n  declarations: [\n    ConfirmGamePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ConfirmGamePage),\n  ],\n})\nexport class ConfirmGamePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirm-game/confirm-game.module.ts","import { Component } from '@angular/core';\nimport {\n    AlertController,\n    IonicPage, LoadingController,\n    NavController,\n    NavParams,\n    Refresher, ToastController\n} from 'ionic-angular';\nimport {User} from \"../../providers/user/user\";\nimport { GameModel } from \"../../models/game-model\";\nimport { PlayerModel } from \"../../models/player-model\";\nimport {DataProvider} from \"../../providers/data/data\";\n\n\n/**\n * Generated class for the ConfirmGamePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-confirm-game',\n  templateUrl: 'confirm-game.html',\n})\nexport class ConfirmGamePage {\n\n  games: GameModel[] = [];\n  loading: boolean = false;\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              public data: DataProvider,\n              public toastCtrl: ToastController,\n              public alertCtrl: AlertController,\n              public loadingCtrl: LoadingController,\n              public user: User) {\n  }\n\n  ionViewDidLoad() {\n\n    console.log('ionViewDidLoad ConfirmGamePage');\n/*\n    if (this.user.profile.uid) {\n        if (!this.loading) {\n            this.loading = true;\n            this.update();\n            this.loading = false;\n        }\n\n    } else {\n      console.log('User not loaded')\n    }\n*/\n  }\n\n  ionViewWillEnter() {\n      console.log('ionViewWillEnter ConfirmGamePage')\n      if (this.user.profile.uid) {\n          if (!this.loading) {\n              this.loading = true;\n              this.update();\n              this.loading = false;\n          }\n\n      }\n  }\n\n\n  update() {\n    let loader = this.loadingCtrl.create({\n        content: \"Updating...\",\n        duration: 10000\n    });\n    loader.present();\n\n\n    this.games = [];\n    this.user.confirmGames().then(\n        result => {\n            console.log('result', result);\n            this.loadGames(result);\n            loader.dismissAll();\n            this.loading = false;\n        }\n    )\n  }\n\n  loadGames(data: any) {\n\n    for (const item of data) {\n      console.log('Processing', item);\n      let game = new GameModel(item);\n\n      let challenger = new PlayerModel(item);\n      console.log('Player', challenger);\n      game.setChallenger(challenger);\n      game.venue_name = item.venue_name;\n      game.leaderboard = item.leaderboard;\n      if (game.winner == game.opponent) {\n          game.winner_name = \"You\";\n      } else {\n          game.winner_name = game.challenger_player.first;\n      }\n\n\n      this.games.push(game);\n    }\n    console.log('Games', this.games);\n  }\n\n  doRefresh(refresher: Refresher) {\n    this.update();\n    refresher.complete();\n  }\n\n  confirmCheck(game: GameModel) {\n      console.log('Submit()');\n\n      let prompt = this.alertCtrl.create({\n          title: \"Just checking\",\n          message: 'Happy to confirm?',\n          buttons: [\n              {\n                  text: 'Not sure',\n                  handler: data => {\n                      console.log('Not sure');\n                  }\n              },\n              {\n                  text: 'Yes',\n                  handler: data => {\n                      this.confirm(game);\n                  }\n              }\n          ]\n      });\n      prompt.present();\n  }\n\n    confirm(game: GameModel) {\n      let loader = this.loadingCtrl.create({\n          content: \"Confirming...\",\n          duration: 10000\n      });\n      loader.present();\n\n      let response = this.user.confirmGame(game.nid).subscribe(resp=>\n      {\n          loader.dismissAll();\n          this.update();\n      });\n\n      console.log('Confirm game response', response);\n  }\n\n    toast(message: string) {\n        let toast = this.toastCtrl.create({\n            message: message,\n            duration: 1000,\n            position: 'bottom'\n        });\n        toast.present();\n    }\n\n    removeCheck(game: GameModel) {\n        let loader = this.loadingCtrl.create({\n            content: \"Removing...\",\n            duration: 10000\n        });\n        loader.present();\n\n        let response = this.user.removeGame(game.nid).subscribe(resp=>\n        {\n            loader.dismissAll();\n            this.update();\n        });\n\n        console.log('Game remove', response);\n    }\n\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/confirm-game/confirm-game.ts"],"sourceRoot":""}